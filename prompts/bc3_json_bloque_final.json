{"id":"bc3_json_bloque_final","template":"Este es el BLOQUE FINAL del BC3. Puede ser un archivo completo en un solo bloque o el último de varios.\n\nREGLAS ESTRICTAS:\n- La respuesta debe ser ÚNICAMENTE un objeto JSON con dos claves raíz: \"proyecto\" (estructura del árbol) y \"recursosUnicos\" (lista aparte, ver abajo).\n- \"proyecto\" → \"capitulos\" → \"subcapitulos\" → \"partidas\" → \"recursos\". Dentro del árbol los recursos se repiten por partida (es la estructura).\n- \"recursosUnicos\": array de recursos ÚNICOS por código, una sola vez cada recurso, para catálogo/estadísticas. No tiene que ver con la estructura del árbol. Cada elemento: { \"codigo\", \"descripcion\", \"tipo\", \"unidad\", \"precio_unitario\", \"rendimiento\" }.\n- Es OBLIGATORIO cerrar todo el JSON. Responde SOLO con el JSON, sin explicaciones.\n\nJSON parcial (si no hay previo, ignóralo y genera desde cero con este bloque como BC3 completo):\n\n{{JSON_PARCIAL}}\n\nTu tarea:\n1. Integrar este bloque en el JSON parcial (si existe) o generar el JSON completo si no hay previo.\n2. Completar capítulos, partidas, descomposición y recursos (dentro del árbol los recursos se repiten por partida).\n3. Añadir al final, a nivel raíz, la clave \"recursosUnicos\": un array con cada recurso UNA SOLA VEZ (por código). Incluir en cada uno: codigo, descripcion, tipo (material|mano_obra|herramienta|medios_auxiliares), unidad, precio_unitario, rendimiento. Esta lista es independiente del árbol.\n4. Cerrar el JSON por completo.\n\nDevuélveme el JSON COMPLETO con \"proyecto\" y \"recursosUnicos\".\n\n### BLOQUE FINAL (contenido BC3):\n\n{{BC3_BLOQUE}}","variables":["JSON_PARCIAL","BC3_BLOQUE"]}
